<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScholarPath - Find Your Perfect Scholarship</title>
  <link rel="icon" type="image/svg+xml" href="/images/favicon.svg">
  <link rel="stylesheet" href="/css/global.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      background: #ffffff;
    }

    /* Modal Styles */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-container {
      background: white;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-xl);
      max-width: 440px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      background: var(--primary-color);
      color: white;
      padding: 1.5rem 2rem;
      text-align: center;
      position: relative;
    }

    .modal-header h2 {
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
      color: white;
    }

    .modal-header p {
      opacity: 0.9;
      font-size: 0.9375rem;
      color: rgba(255, 255, 255, 0.9);
      margin: 0;
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.25rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .modal-logo {
      width: 64px;
      height: 64px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      padding: 0.75rem;
    }

    .modal-logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      filter: brightness(0) invert(1);
    }

    .modal-content {
      padding: 1.5rem 2rem;
    }

    .modal-footer {
      text-align: center;
      padding: 1rem 2rem 1.5rem;
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-color);
    }

    .modal-footer p {
      font-size: 0.9375rem;
      color: var(--text-secondary);
      margin: 0;
    }

    .modal-footer a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      cursor: pointer;
    }

    .modal-footer a:hover {
      text-decoration: underline;
    }

    /* Form Styles for Modal */
    .modal-content .form-group {
      margin-bottom: 1rem;
    }

    .modal-content .form-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .modal-content .form-control {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      font-size: 0.9375rem;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .modal-content .form-control:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .password-input-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }

    .password-input-wrapper input {
      flex: 1;
      padding-right: 3.5rem;
    }

    .toggle-password {
      position: absolute;
      right: 0.75rem;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 0.8rem;
      padding: 0.25rem 0.5rem;
      color: var(--text-muted);
      transition: color 0.2s;
    }

    .toggle-password:hover {
      color: var(--text-secondary);
    }

    .error-message {
      background: #fef2f2;
      border: 1px solid #fecaca;
      color: #dc2626;
      padding: 0.75rem 1rem;
      border-radius: var(--radius);
      margin-bottom: 1rem;
      font-size: 0.875rem;
    }

    .btn-block {
      width: 100%;
    }

    /* Register Type Selection */
    .register-type-selection {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .register-type-btn {
      flex: 1;
      padding: 1rem;
      border: 2px solid var(--border-color);
      border-radius: var(--radius);
      background: white;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
    }

    .register-type-btn:hover {
      border-color: var(--primary-color);
    }

    .register-type-btn.active {
      border-color: var(--primary-color);
      background: var(--primary-50);
    }

    .register-type-btn .type-icon {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .register-type-btn .type-label {
      font-weight: 600;
      color: var(--text-primary);
    }

    .register-type-btn .type-desc {
      font-size: 0.75rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    /* Google Sign-In Button */
    .btn-google {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      width: 100%;
      padding: 0.75rem 1rem;
      background: white;
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      font-size: 0.9375rem;
      font-weight: 500;
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-google:hover {
      background: var(--bg-secondary);
      border-color: var(--gray-400);
    }

    .btn-google:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .btn-google svg {
      width: 20px;
      height: 20px;
    }

    /* Auth Divider */
    .auth-divider {
      display: flex;
      align-items: center;
      margin: 1.25rem 0;
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    .auth-divider::before,
    .auth-divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border-color);
    }

    .auth-divider span {
      padding: 0 1rem;
    }

    /* Forgot Password Link */
    .forgot-password-link {
      display: block;
      text-align: right;
      font-size: 0.875rem;
      color: var(--primary-color);
      text-decoration: none;
      margin-bottom: 1rem;
      cursor: pointer;
    }

    .forgot-password-link:hover {
      text-decoration: underline;
    }

    /* Terms Checkbox */
    .terms-checkbox {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      margin: 1rem 0 1.25rem;
      padding: 0.75rem;
      background: var(--bg-secondary);
      border-radius: var(--radius);
      border: 1px solid var(--border-color);
    }

    .terms-checkbox input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-top: 2px;
      cursor: pointer;
      accent-color: var(--primary-color);
    }

    .terms-checkbox input[type="checkbox"]:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }

    .terms-checkbox label {
      font-size: 0.875rem;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .terms-checkbox label a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      cursor: pointer;
    }

    .terms-checkbox label a:hover {
      text-decoration: underline;
    }

    .terms-checkbox.error {
      border-color: #dc2626;
      background: #fef2f2;
    }

    /* Terms Modal - Larger for content */
    .terms-modal-container {
      background: white;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-xl);
      max-width: 700px;
      width: 100%;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      animation: modalSlideIn 0.3s ease;
    }

    .terms-modal-header {
      background: var(--primary-color);
      color: white;
      padding: 1.25rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
    }

    .terms-modal-header h2 {
      font-size: 1.25rem;
      margin: 0;
      color: white;
    }

    .terms-modal-content {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
      max-height: 50vh;
      font-size: 0.9375rem;
      line-height: 1.8;
      color: var(--text-secondary);
    }

    .terms-modal-content h3 {
      color: var(--text-primary);
      font-size: 1rem;
      margin: 1.5rem 0 0.75rem;
    }

    .terms-modal-content h3:first-child {
      margin-top: 0;
    }

    .terms-modal-content p {
      margin-bottom: 1rem;
    }

    .terms-modal-content ul {
      margin-bottom: 1rem;
      padding-left: 1.5rem;
    }

    .terms-modal-content li {
      margin-bottom: 0.5rem;
    }

    .terms-scroll-indicator {
      padding: 0.75rem 1.5rem;
      background: linear-gradient(to bottom, transparent, var(--bg-secondary));
      text-align: center;
      font-size: 0.8125rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .terms-scroll-indicator.hidden {
      display: none;
    }

    .terms-scroll-indicator svg {
      width: 16px;
      height: 16px;
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(4px); }
    }

    .terms-modal-footer {
      padding: 1rem 1.5rem;
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-color);
      display: flex;
      gap: 1rem;
      flex-shrink: 0;
    }

    .terms-modal-footer .btn {
      flex: 1;
    }

    .btn-accept {
      background: var(--primary-color);
      color: white;
    }

    .btn-accept:disabled {
      background: var(--gray-400);
      cursor: not-allowed;
      opacity: 0.7;
    }

    .btn-decline {
      background: white;
      color: var(--text-secondary);
      border: 1px solid var(--border-color);
    }

    .btn-decline:hover {
      background: var(--bg-secondary);
    }

    /* Success Message */
    .success-message {
      background: #dcfce7;
      border: 1px solid #86efac;
      color: #166534;
      padding: 0.75rem 1rem;
      border-radius: var(--radius);
      margin-bottom: 1rem;
      font-size: 0.875rem;
    }

    /* Navbar */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border-color);
      padding: 0 2rem;
      height: 72px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .navbar-brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
      text-decoration: none;
    }

    .navbar-brand span {
      color: var(--text-primary);
    }

    .navbar-nav {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .nav-link {
      padding: 0.5rem 1rem;
      color: var(--text-secondary);
      font-weight: 500;
      transition: color var(--transition-fast);
    }

    .nav-link:hover {
      color: var(--primary-color);
    }

    /* Hero Section */
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 120px 2rem 80px;
      background: linear-gradient(180deg, var(--primary-50) 0%, #ffffff 100%);
    }

    .hero-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
    }

    .hero-content h1 {
      font-size: 3.5rem;
      font-weight: 700;
      line-height: 1.1;
      margin-bottom: 1.5rem;
      color: var(--gray-900);
    }

    .hero-content h1 span {
      color: var(--primary-color);
    }

    .hero-content p {
      font-size: 1.25rem;
      color: var(--gray-700);
      margin-bottom: 2rem;
      line-height: 1.7;
    }

    .hero-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .hero-visual {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .hero-card {
      background: white;
      border-radius: var(--radius-lg);
      padding: 2rem;
      box-shadow: var(--shadow-xl);
      width: 100%;
      max-width: 400px;
    }

    .hero-card-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .hero-card-icon {
      width: 48px;
      height: 48px;
      background: var(--primary-color);
      color: white;
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      font-weight: 700;
    }

    .hero-card-title {
      font-size: 1.125rem;
      font-weight: 600;
    }

    .hero-card-subtitle {
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .hero-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      text-align: center;
    }

    .hero-stat-value {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--primary-color);
    }

    .hero-stat-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Features Section */
    .features {
      padding: 100px 2rem;
      background: var(--bg-secondary);
    }

    .features-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .section-header {
      text-align: center;
      margin-bottom: 4rem;
    }

    .section-header h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--gray-900);
    }

    .section-header p {
      font-size: 1.125rem;
      max-width: 600px;
      margin: 0 auto;
      color: var(--gray-700);
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
    }

    .feature-card {
      background: white;
      border-radius: var(--radius-md);
      padding: 2rem;
      text-align: center;
      border: 1px solid var(--border-color);
      transition: all var(--transition);
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .feature-icon {
      width: 64px;
      height: 64px;
      background: var(--primary-100);
      color: var(--primary-600);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .feature-card h3 {
      margin-bottom: 0.75rem;
      color: var(--gray-900);
    }

    .feature-card p {
      font-size: 0.9375rem;
      color: var(--gray-700);
    }

    /* CTA Section */
    .cta {
      padding: 100px 2rem;
      background: var(--primary-600);
      color: white;
    }

    .cta-container {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }

    .cta h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: white;
    }

    .cta p {
      font-size: 1.25rem;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 2rem;
    }

    .cta-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .cta .btn-white {
      background: white;
      color: var(--primary-600);
    }

    .cta .btn-white:hover {
      background: var(--gray-100);
      transform: translateY(-1px);
    }

    .cta .btn-outline-white {
      background: transparent;
      color: white;
      border: 2px solid white;
    }

    .cta .btn-outline-white:hover {
      background: white;
      color: var(--primary-600);
    }

    /* Footer */
    .landing-footer {
      padding: 3rem 2rem;
      background: var(--gray-900);
      color: var(--gray-400);
      text-align: center;
    }

    .landing-footer p {
      color: var(--gray-400);
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .hero-container {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .hero-content h1 {
        font-size: 2.5rem;
      }

      .hero-buttons {
        justify-content: center;
      }

      .hero-visual {
        order: -1;
      }

      .features-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .navbar {
        padding: 0 1rem;
      }

      .hero {
        padding: 100px 1rem 60px;
      }

      .hero-content h1 {
        font-size: 2rem;
      }

      .features-grid {
        grid-template-columns: 1fr;
      }

      .section-header h2,
      .cta h2 {
        font-size: 1.75rem;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <a href="/" class="navbar-brand">
      <img src="/images/icon.svg" alt="ScholarPath Logo" style="width: 32px; height: 32px;">
      Scholar<span>Path</span>
    </a>
    <div class="navbar-nav">
      <button onclick="openLoginModal()" class="btn btn-ghost">Log In</button>
      <button onclick="openRegisterModal()" class="btn btn-primary">Get Started</button>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-container">
      <div class="hero-content">
        <h1>Find Your <span>Perfect</span> Scholarship Match</h1>
        <p>Our AI-powered platform connects students with the right scholarship opportunities. Get personalized recommendations and increase your chances of funding your education.</p>
        <div class="hero-buttons">
          <button onclick="openRegisterModal('student')" class="btn btn-primary btn-lg">Apply as Student</button>
          <button onclick="openRegisterModal('sponsor')" class="btn btn-outline btn-lg">Become a Sponsor</button>
        </div>
      </div>
      <div class="hero-visual">
        <div class="hero-card">
          <div class="hero-card-header">
            <div class="hero-card-icon">SP</div>
            <div>
              <div class="hero-card-title">ScholarPath</div>
              <div class="hero-card-subtitle">Scholarship Portal</div>
            </div>
          </div>
          <div class="hero-stats">
            <div>
              <div class="hero-stat-value">500+</div>
              <div class="hero-stat-label">Scholarships</div>
            </div>
            <div>
              <div class="hero-stat-value">10K+</div>
              <div class="hero-stat-label">Students</div>
            </div>
            <div>
              <div class="hero-stat-value">95%</div>
              <div class="hero-stat-label">Match Rate</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features">
    <div class="features-container">
      <div class="section-header">
        <h2>Why Choose ScholarPath?</h2>
        <p>We simplify the scholarship search process with smart technology and personalized recommendations.</p>
      </div>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">AI</div>
          <h3>AI-Powered Matching</h3>
          <p>Our intelligent system analyzes your profile and matches you with scholarships that fit your qualifications.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">+</div>
          <h3>Easy Application</h3>
          <p>Apply to multiple scholarships with a single profile. No more repetitive form filling.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">$</div>
          <h3>Track Progress</h3>
          <p>Monitor your applications in real-time and receive notifications on status updates.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta">
    <div class="cta-container">
      <h2>Ready to Start Your Journey?</h2>
      <p>Join thousands of students who have found their perfect scholarship match through ScholarPath.</p>
      <div class="cta-buttons">
        <button onclick="openRegisterModal()" class="btn btn-white btn-lg">Create Free Account</button>
        <button onclick="openLoginModal()" class="btn btn-outline-white btn-lg">Sign In</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="landing-footer">
    <p>&copy; 2025 ScholarPath. All rights reserved.</p>
  </footer>

  <!-- Login Modal -->
  <div class="modal-overlay" id="loginModal">
    <div class="modal-container">
      <div class="modal-header">
        <button class="modal-close" onclick="closeLoginModal()">&times;</button>
        <div class="modal-logo"><img src="/images/icon.svg" alt="ScholarPath"></div>
        <h2>Welcome Back</h2>
        <p>Log in to access your account</p>
      </div>
      <div class="modal-content">
        <div id="loginError" class="error-message" style="display: none;"></div>
        <div id="loginSuccess" class="success-message" style="display: none;"></div>

        <!-- Google Sign-In Button -->
        <button type="button" class="btn-google" id="googleLoginBtn" onclick="handleGoogleSignIn('login')">
          <svg viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Continue with Google
        </button>

        <div class="auth-divider"><span>or</span></div>

        <form id="loginForm" onsubmit="handleLogin(event)">
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input type="email" name="email" id="loginEmail" class="form-control" placeholder="Enter your email" required>
          </div>
          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="password-input-wrapper">
              <input type="password" name="password" id="loginPassword" class="form-control" placeholder="Enter your password" required>
              <button type="button" class="toggle-password" onclick="togglePassword('loginPassword', this)">Show</button>
            </div>
          </div>
          <a class="forgot-password-link" onclick="openForgotPasswordModal()">Forgot password?</a>
          <button type="submit" class="btn btn-primary btn-block" id="loginBtn">Log In</button>
        </form>
      </div>
      <div class="modal-footer">
        <p>Don't have an account? <a onclick="switchToRegister()">Create Account</a></p>
      </div>
    </div>
  </div>

  <!-- Register Modal -->
  <div class="modal-overlay" id="registerModal">
    <div class="modal-container">
      <div class="modal-header">
        <button class="modal-close" onclick="closeRegisterModal()">&times;</button>
        <div class="modal-logo"><img src="/images/icon.svg" alt="ScholarPath"></div>
        <h2>Create Account</h2>
        <p>Join ScholarPath today</p>
      </div>
      <div class="modal-content">
        <div id="registerError" class="error-message" style="display: none;"></div>
        <div id="registerSuccess" class="success-message" style="display: none;"></div>

        <!-- Account Type Selection -->
        <div class="register-type-selection">
          <button type="button" class="register-type-btn active" id="studentTypeBtn" onclick="selectRegisterType('student')">
            <div class="type-icon">S</div>
            <div class="type-label">Student</div>
            <div class="type-desc">Find scholarships</div>
          </button>
          <button type="button" class="register-type-btn" id="sponsorTypeBtn" onclick="selectRegisterType('sponsor')">
            <div class="type-icon">O</div>
            <div class="type-label">Sponsor</div>
            <div class="type-desc">Offer scholarships</div>
          </button>
        </div>

        <!-- Google Sign-In Button -->
        <button type="button" class="btn-google" id="googleRegisterBtn" onclick="handleGoogleSignIn('register')">
          <svg viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Continue with Google
        </button>

        <div class="auth-divider"><span>or register with email</span></div>

        <form id="registerForm" onsubmit="handleRegister(event)">
          <input type="hidden" name="registerType" id="registerType" value="student">

          <div class="form-group">
            <label class="form-label" id="nameLabel">Full Name</label>
            <input type="text" name="fullName" id="registerName" class="form-control" placeholder="Enter your full name" required>
          </div>
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input type="email" name="email" id="registerEmail" class="form-control" placeholder="Enter your email" required>
          </div>
          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="password-input-wrapper">
              <input type="password" name="password" id="registerPassword" class="form-control" placeholder="Create a password (min. 6 characters)" required minlength="6">
              <button type="button" class="toggle-password" onclick="togglePassword('registerPassword', this)">Show</button>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Confirm Password</label>
            <div class="password-input-wrapper">
              <input type="password" name="confirmPassword" id="registerConfirmPassword" class="form-control" placeholder="Confirm your password" required>
              <button type="button" class="toggle-password" onclick="togglePassword('registerConfirmPassword', this)">Show</button>
            </div>
          </div>
          <div class="terms-checkbox" id="termsCheckboxContainer">
            <input type="checkbox" id="termsAccepted" name="termsAccepted" disabled>
            <label for="termsAccepted">
              I have read and agree to the <a onclick="openTermsModal(event)">Terms and Conditions</a> and <a href="/privacy" target="_blank">Privacy Policy</a>
            </label>
          </div>
          <button type="submit" class="btn btn-primary btn-block" id="registerBtn">Create Account</button>
        </form>
      </div>
      <div class="modal-footer">
        <p>Already have an account? <a onclick="switchToLogin()">Log In</a></p>
      </div>
    </div>
  </div>

  <!-- Forgot Password Modal -->
  <div class="modal-overlay" id="forgotPasswordModal">
    <div class="modal-container">
      <div class="modal-header">
        <button class="modal-close" onclick="closeForgotPasswordModal()">&times;</button>
        <div class="modal-logo"><img src="/images/icon.svg" alt="ScholarPath"></div>
        <h2>Reset Password</h2>
        <p>Enter your email to receive reset instructions</p>
      </div>
      <div class="modal-content">
        <div id="forgotPasswordError" class="error-message" style="display: none;"></div>
        <div id="forgotPasswordSuccess" class="success-message" style="display: none;"></div>

        <form id="forgotPasswordForm" onsubmit="handleForgotPassword(event)">
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input type="email" name="email" id="forgotPasswordEmail" class="form-control" placeholder="Enter your email" required>
          </div>
          <button type="submit" class="btn btn-primary btn-block" id="forgotPasswordBtn">Send Reset Link</button>
        </form>
      </div>
      <div class="modal-footer">
        <p>Remember your password? <a onclick="backToLogin()">Back to Login</a></p>
      </div>
    </div>
  </div>

  <!-- Terms and Conditions Modal -->
  <div class="modal-overlay" id="termsModal">
    <div class="terms-modal-container">
      <div class="terms-modal-header">
        <h2>Terms and Conditions</h2>
        <button class="modal-close" onclick="closeTermsModal()">&times;</button>
      </div>
      <div class="terms-modal-content" id="termsContent">
        <h3>1. Acceptance of Terms</h3>
        <p>By accessing or using the Scholarship Portal ("Service"), you agree to be bound by these Terms of Service ("Terms"). If you do not agree to these Terms, please do not use our Service.</p>
        <p>These Terms constitute a legally binding agreement between you and Scholarship Portal regarding your use of the Service.</p>

        <h3>2. Description of Service</h3>
        <p>The Scholarship Portal is an online platform that:</p>
        <ul>
          <li>Connects students seeking financial aid with scholarship sponsors</li>
          <li>Provides AI-powered scholarship matching and recommendations</li>
          <li>Facilitates the scholarship application and review process</li>
          <li>Manages communication between students and sponsors</li>
        </ul>

        <h3>3. Eligibility</h3>
        <p>To use our Service, you must:</p>
        <ul>
          <li>Be at least 16 years of age</li>
          <li>Be a currently enrolled student (for student accounts) or authorized representative of an organization (for sponsor accounts)</li>
          <li>Have the legal capacity to enter into these Terms</li>
          <li>Provide accurate and complete registration information</li>
        </ul>

        <h3>4. User Accounts</h3>
        <p>You must create an account to access most features of the Service. You agree to:</p>
        <ul>
          <li>Provide accurate, current, and complete information</li>
          <li>Maintain and promptly update your information</li>
          <li>Keep your password secure and confidential</li>
          <li>Notify us immediately of any unauthorized access</li>
        </ul>

        <h3>5. User Conduct</h3>
        <p>You agree NOT to:</p>
        <ul>
          <li>Submit false or misleading information</li>
          <li>Impersonate another person or organization</li>
          <li>Upload malicious files or harmful content</li>
          <li>Attempt to gain unauthorized access to the Service</li>
          <li>Use the Service for any illegal purpose</li>
          <li>Harass, abuse, or harm other users</li>
          <li>Manipulate or abuse the AI recommendation system</li>
          <li>Apply for scholarships you know you are not eligible for</li>
        </ul>

        <h3>6. Scholarship Applications</h3>
        <p>When applying for scholarships, you:</p>
        <ul>
          <li>Certify that all submitted information is accurate</li>
          <li>Authorize verification of your submitted documents</li>
          <li>Understand that false information may disqualify your application</li>
          <li>Accept that scholarship decisions are made by sponsors, not the platform</li>
        </ul>

        <h3>7. Privacy and Data Protection</h3>
        <p>Your privacy is important to us. We collect and process your personal data in accordance with our Privacy Policy. By using the Service, you consent to:</p>
        <ul>
          <li>Collection of your personal and academic information</li>
          <li>Sharing of your application data with scholarship sponsors</li>
          <li>Use of cookies and analytics for service improvement</li>
        </ul>

        <h3>8. Intellectual Property</h3>
        <p>All content, features, and functionality of the Service are owned by Scholarship Portal and are protected by copyright, trademark, and other intellectual property laws. You may not copy, modify, distribute, or reverse engineer any part of the Service without our written permission.</p>

        <h3>9. Disclaimers</h3>
        <p>THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND. We do not warrant that:</p>
        <ul>
          <li>The Service will be uninterrupted or error-free</li>
          <li>Defects will be corrected</li>
          <li>The Service is free of viruses or harmful components</li>
          <li>AI recommendations are perfectly accurate</li>
        </ul>

        <h3>10. Limitation of Liability</h3>
        <p>To the maximum extent permitted by law, Scholarship Portal shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service.</p>

        <h3>11. Changes to Terms</h3>
        <p>We may modify these Terms at any time. We will notify users of significant changes via email or prominent notice on the Service. Continued use after changes constitutes acceptance of the new Terms.</p>

        <h3>12. Contact Information</h3>
        <p>For questions about these Terms, please contact us at legal@scholarshipportal.com or visit our Help Center.</p>
      </div>
      <div class="terms-scroll-indicator" id="termsScrollIndicator">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M7 13l5 5 5-5M7 6l5 5 5-5"/>
        </svg>
        Scroll down to read all terms
      </div>
      <div class="terms-modal-footer">
        <button class="btn btn-decline" onclick="declineTerms()">Decline</button>
        <button class="btn btn-accept" id="acceptTermsBtn" onclick="acceptTerms()" disabled>Accept Terms</button>
      </div>
    </div>
  </div>

  <!-- Load Firebase SDK for Google Sign-In -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>

  <script>
    // Initialize Firebase (using environment variables passed from server)
    // You need to create a route or include these values
    const firebaseConfig = {
      apiKey: "<%= process.env.FIREBASE_API_KEY %>",
      authDomain: "<%= process.env.FIREBASE_AUTH_DOMAIN %>",
      projectId: "<%= process.env.FIREBASE_PROJECT_ID %>",
    };

    // Initialize Firebase if not already initialized
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }

    // Email Validation (frontend)
    function isValidEmail(email) {
      const basicRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!basicRegex.test(email)) {
        return { valid: false, error: "Please enter a valid email address" };
      }

      // Check for repeated TLDs like .com.com
      const repeatedTldRegex = /\.(com|org|net|edu|gov|io|co|ph)\.\1$/i;
      if (repeatedTldRegex.test(email)) {
        return { valid: false, error: "Invalid email: duplicate domain extension (e.g., .com.com)" };
      }

      // Check for suspicious double TLDs
      const suspiciousTldRegex = /\.(com|org|net|edu|gov|io|co|ph)\.(com|org|net|edu|gov|io|co|ph)$/i;
      if (suspiciousTldRegex.test(email)) {
        return { valid: false, error: "Invalid email format: please check your email domain" };
      }

      return { valid: true };
    }

    // Modal Functions
    function openLoginModal() {
      document.getElementById('loginModal').classList.add('active');
      document.body.style.overflow = 'hidden';
      document.getElementById('loginError').style.display = 'none';
      document.getElementById('loginSuccess').style.display = 'none';
    }

    function closeLoginModal() {
      document.getElementById('loginModal').classList.remove('active');
      document.body.style.overflow = '';
      document.getElementById('loginForm').reset();
      document.getElementById('loginError').style.display = 'none';
      document.getElementById('loginSuccess').style.display = 'none';
    }

    function openRegisterModal(type = 'student') {
      document.getElementById('registerModal').classList.add('active');
      document.body.style.overflow = 'hidden';
      document.getElementById('registerError').style.display = 'none';
      document.getElementById('registerSuccess').style.display = 'none';
      selectRegisterType(type);
    }

    function closeRegisterModal() {
      document.getElementById('registerModal').classList.remove('active');
      document.body.style.overflow = '';
      document.getElementById('registerForm').reset();
      document.getElementById('registerError').style.display = 'none';
      document.getElementById('registerSuccess').style.display = 'none';
      // Reset terms checkbox
      const termsCheckbox = document.getElementById('termsAccepted');
      termsCheckbox.checked = false;
      termsCheckbox.disabled = true;
      document.getElementById('termsCheckboxContainer').classList.remove('error');
      termsRead = false;
    }

    function openForgotPasswordModal() {
      closeLoginModal();
      setTimeout(() => {
        document.getElementById('forgotPasswordModal').classList.add('active');
        document.body.style.overflow = 'hidden';
        document.getElementById('forgotPasswordError').style.display = 'none';
        document.getElementById('forgotPasswordSuccess').style.display = 'none';
      }, 150);
    }

    function closeForgotPasswordModal() {
      document.getElementById('forgotPasswordModal').classList.remove('active');
      document.body.style.overflow = '';
      document.getElementById('forgotPasswordForm').reset();
      document.getElementById('forgotPasswordError').style.display = 'none';
      document.getElementById('forgotPasswordSuccess').style.display = 'none';
    }

    function backToLogin() {
      closeForgotPasswordModal();
      setTimeout(() => openLoginModal(), 150);
    }

    function switchToRegister() {
      closeLoginModal();
      setTimeout(() => openRegisterModal(), 150);
    }

    function switchToLogin() {
      closeRegisterModal();
      setTimeout(() => openLoginModal(), 150);
    }

    // Register Type Selection
    function selectRegisterType(type) {
      document.getElementById('registerType').value = type;

      const studentBtn = document.getElementById('studentTypeBtn');
      const sponsorBtn = document.getElementById('sponsorTypeBtn');
      const nameLabel = document.getElementById('nameLabel');
      const nameInput = document.getElementById('registerName');

      if (type === 'student') {
        studentBtn.classList.add('active');
        sponsorBtn.classList.remove('active');
        nameLabel.textContent = 'Full Name';
        nameInput.placeholder = 'Enter your full name';
      } else {
        sponsorBtn.classList.add('active');
        studentBtn.classList.remove('active');
        nameLabel.textContent = 'Organization Name';
        nameInput.placeholder = 'Enter your organization name';
      }
    }

    // Toggle Password Visibility
    function togglePassword(inputId, button) {
      const input = document.getElementById(inputId);
      if (input.type === 'password') {
        input.type = 'text';
        button.textContent = 'Hide';
      } else {
        input.type = 'password';
        button.textContent = 'Show';
      }
    }

    // Handle Google Sign-In
    async function handleGoogleSignIn(mode) {
      const provider = new firebase.auth.GoogleAuthProvider();
      const role = document.getElementById('registerType')?.value || 'student';
      const errorDiv = mode === 'login' ? document.getElementById('loginError') : document.getElementById('registerError');

      try {
        // Step 1: Firebase Google popup
        const result = await firebase.auth().signInWithPopup(provider);
        const user = result.user;

        console.log('Google auth success, sending to backend...');

        // Step 2: Send user info to backend
        const response = await fetch('/auth/google', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            uid: user.uid,
            email: user.email,
            displayName: user.displayName,
            role
          })
        });

        // Check if response is ok
        if (!response.ok) {
          const errorData = await response.json().catch(() => ({ error: 'Server error' }));
          throw new Error(errorData.error || 'Server returned an error');
        }

        const data = await response.json();

        if (data.success) {
          window.location.href = data.redirect || '/dashboard';
        } else {
          errorDiv.textContent = data.error || 'Google sign-in failed. Please try again.';
          errorDiv.style.display = 'block';
        }
      } catch (error) {
        console.error('Google sign-in error:', error);
        // Don't show error if user just closed the popup
        if (error.code === 'auth/popup-closed-by-user') {
          return;
        }
        errorDiv.textContent = error.message || 'Google sign-in failed. Please try again.';
        errorDiv.style.display = 'block';
      }
    }

    // Handle Forgot Password
    async function handleForgotPassword(event) {
      event.preventDefault();

      const btn = document.getElementById('forgotPasswordBtn');
      const errorDiv = document.getElementById('forgotPasswordError');
      const successDiv = document.getElementById('forgotPasswordSuccess');
      const email = document.getElementById('forgotPasswordEmail').value;

      // Validate email
      const emailValidation = isValidEmail(email);
      if (!emailValidation.valid) {
        errorDiv.textContent = emailValidation.error;
        errorDiv.style.display = 'block';
        return;
      }

      btn.disabled = true;
      btn.textContent = 'Sending...';
      errorDiv.style.display = 'none';
      successDiv.style.display = 'none';

      try {
        const response = await fetch('/auth/forgot-password', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ email })
        });

        const data = await response.json();

        if (data.success) {
          successDiv.textContent = data.message;
          successDiv.style.display = 'block';
          btn.textContent = 'Email Sent';
        } else {
          errorDiv.textContent = data.error || 'Failed to send reset email.';
          errorDiv.style.display = 'block';
          btn.disabled = false;
          btn.textContent = 'Send Reset Link';
        }
      } catch (error) {
        errorDiv.textContent = 'An error occurred. Please try again.';
        errorDiv.style.display = 'block';
        btn.disabled = false;
        btn.textContent = 'Send Reset Link';
      }
    }

    // Handle Login
    async function handleLogin(event) {
      event.preventDefault();

      const btn = document.getElementById('loginBtn');
      const errorDiv = document.getElementById('loginError');
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;

      // Validate email
      const emailValidation = isValidEmail(email);
      if (!emailValidation.valid) {
        errorDiv.textContent = emailValidation.error;
        errorDiv.style.display = 'block';
        return;
      }

      btn.disabled = true;
      btn.textContent = 'Logging in...';
      errorDiv.style.display = 'none';

      try {
        const response = await fetch('/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ email, password })
        });

        const data = await response.json();

        if (data.success) {
          window.location.href = data.redirect || '/dashboard';
        } else {
          errorDiv.textContent = data.error || 'Login failed. Please try again.';
          errorDiv.style.display = 'block';
          btn.disabled = false;
          btn.textContent = 'Log In';
        }
      } catch (error) {
        errorDiv.textContent = 'An error occurred. Please try again.';
        errorDiv.style.display = 'block';
        btn.disabled = false;
        btn.textContent = 'Log In';
      }
    }

    // Handle Register
    async function handleRegister(event) {
      event.preventDefault();

      const btn = document.getElementById('registerBtn');
      const errorDiv = document.getElementById('registerError');
      const successDiv = document.getElementById('registerSuccess');
      const type = document.getElementById('registerType').value;
      const fullName = document.getElementById('registerName').value;
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      const confirmPassword = document.getElementById('registerConfirmPassword').value;
      const termsCheckbox = document.getElementById('termsAccepted');
      const termsContainer = document.getElementById('termsCheckboxContainer');

      // Validate email
      const emailValidation = isValidEmail(email);
      if (!emailValidation.valid) {
        errorDiv.textContent = emailValidation.error;
        errorDiv.style.display = 'block';
        return;
      }

      if (password !== confirmPassword) {
        errorDiv.textContent = 'Passwords do not match.';
        errorDiv.style.display = 'block';
        return;
      }

      if (password.length < 6) {
        errorDiv.textContent = 'Password must be at least 6 characters.';
        errorDiv.style.display = 'block';
        return;
      }

      // Validate terms acceptance
      if (!termsCheckbox.checked) {
        errorDiv.textContent = 'Please read and accept the Terms and Conditions to continue.';
        errorDiv.style.display = 'block';
        termsContainer.classList.add('error');
        return;
      }
      termsContainer.classList.remove('error');

      btn.disabled = true;
      btn.textContent = 'Creating Account...';
      errorDiv.style.display = 'none';

      try {
        const endpoint = type === 'student' ? '/register/student' : '/register/sponsor';
        const response = await fetch(endpoint, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ fullName, email, password, confirmPassword })
        });

        const data = await response.json();

        if (data.success) {
          window.location.href = data.redirect || '/dashboard';
        } else {
          errorDiv.textContent = data.error || 'Registration failed. Please try again.';
          errorDiv.style.display = 'block';
          btn.disabled = false;
          btn.textContent = 'Create Account';
        }
      } catch (error) {
        errorDiv.textContent = 'An error occurred. Please try again.';
        errorDiv.style.display = 'block';
        btn.disabled = false;
        btn.textContent = 'Create Account';
      }
    }

    // Close modal when clicking outside
    document.getElementById('loginModal').addEventListener('click', function(e) {
      if (e.target === this) closeLoginModal();
    });

    document.getElementById('registerModal').addEventListener('click', function(e) {
      if (e.target === this) closeRegisterModal();
    });

    document.getElementById('forgotPasswordModal').addEventListener('click', function(e) {
      if (e.target === this) closeForgotPasswordModal();
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeLoginModal();
        closeRegisterModal();
        closeForgotPasswordModal();
        closeTermsModal();
      }
    });

    // Terms Modal Functions
    let termsRead = false;

    function openTermsModal(event) {
      if (event) event.preventDefault();
      document.getElementById('termsModal').classList.add('active');
      document.body.style.overflow = 'hidden';

      // Reset scroll position and button state
      const content = document.getElementById('termsContent');
      content.scrollTop = 0;
      termsRead = false;
      document.getElementById('acceptTermsBtn').disabled = true;
      document.getElementById('termsScrollIndicator').classList.remove('hidden');

      // Check if content is scrollable
      checkTermsScrollable();
    }

    function closeTermsModal() {
      document.getElementById('termsModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    function checkTermsScrollable() {
      const content = document.getElementById('termsContent');
      const scrollIndicator = document.getElementById('termsScrollIndicator');
      const acceptBtn = document.getElementById('acceptTermsBtn');

      // If content is not scrollable (all content visible), enable accept immediately
      if (content.scrollHeight <= content.clientHeight + 10) {
        termsRead = true;
        acceptBtn.disabled = false;
        scrollIndicator.classList.add('hidden');
      }
    }

    function checkTermsScroll() {
      const content = document.getElementById('termsContent');
      const scrollIndicator = document.getElementById('termsScrollIndicator');
      const acceptBtn = document.getElementById('acceptTermsBtn');

      // Calculate how close to bottom (within 50px)
      const scrolledToBottom = content.scrollHeight - content.scrollTop <= content.clientHeight + 50;

      if (scrolledToBottom && !termsRead) {
        termsRead = true;
        acceptBtn.disabled = false;
        scrollIndicator.classList.add('hidden');
      }
    }

    // Add scroll listener to terms content
    document.getElementById('termsContent').addEventListener('scroll', checkTermsScroll);

    function acceptTerms() {
      if (!termsRead) return;

      // Enable and check the terms checkbox
      const checkbox = document.getElementById('termsAccepted');
      checkbox.disabled = false;
      checkbox.checked = true;

      // Remove error styling if any
      document.getElementById('termsCheckboxContainer').classList.remove('error');

      closeTermsModal();
    }

    function declineTerms() {
      // Uncheck and disable the checkbox
      const checkbox = document.getElementById('termsAccepted');
      checkbox.checked = false;
      checkbox.disabled = true;
      termsRead = false;

      closeTermsModal();
    }

    // Close terms modal when clicking outside
    document.getElementById('termsModal').addEventListener('click', function(e) {
      if (e.target === this) closeTermsModal();
    });
  </script>
</body>
</html>
