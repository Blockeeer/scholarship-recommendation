<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <a href="/dashboard" class="sidebar-brand">
      <img src="/images/icon.svg" alt="ScholarPath" class="brand-icon">
      <span class="brand-text">ScholarPath</span>
    </a>
  </div>

  <a href="/sponsor/profile" class="sidebar-user" style="text-decoration: none; color: inherit;">
    <div class="user-avatar">
      <% if (typeof profilePicture !== 'undefined' && profilePicture) { %>
        <img src="<%= profilePicture %>" alt="Profile" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
      <% } else { %>
        <span><%= typeof fullName !== 'undefined' && fullName ? fullName.charAt(0).toUpperCase() : 'S' %></span>
      <% } %>
    </div>
    <div class="user-info">
      <div class="user-name"><%= typeof fullName !== 'undefined' ? fullName : 'Sponsor' %></div>
      <div class="user-email"><%= email %></div>
    </div>
  </a>

  <nav class="sidebar-nav">
    <a href="/dashboard" class="nav-link" data-tooltip="Dashboard">
      <span class="nav-text">Dashboard</span>
    </a>
    <a href="/sponsor/add-offer" class="nav-link" data-tooltip="Add Scholarship">
      <span class="nav-text">Add Scholarship</span>
    </a>
    <a href="/sponsor/offers" class="nav-link" data-tooltip="My Scholarships">
      <span class="nav-text">My Scholarships</span>
    </a>
    <a href="/sponsor/notifications" class="nav-link" data-tooltip="Notifications">
      <span class="nav-text">Notifications</span>
      <span class="nav-badge" id="notificationCount" style="display: none;"></span>
    </a>
  </nav>
  <style>
    .nav-badge {
      background: #ef4444;
      color: white;
      font-size: 0.7rem;
      padding: 0.15rem 0.4rem;
      border-radius: 999px;
      margin-left: 0.5rem;
      font-weight: 600;
    }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      fetch('/sponsor/api/counts')
        .then(res => res.json())
        .then(data => {
          if (data.unreadNotifications > 0) {
            const notifEl = document.getElementById('notificationCount');
            notifEl.textContent = data.unreadNotifications;
            notifEl.style.display = 'inline';
          }
        })
        .catch(err => console.log('Could not load counts'));
    });
  </script>

  <div class="sidebar-footer">
    <form action="/logout" method="POST" id="logoutForm">
      <input type="hidden" name="_csrf" value="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
      <button type="button" class="logout-btn" data-tooltip="Logout" onclick="showLogoutModal(event)">
        <span class="nav-text">Logout</span>
      </button>
    </form>
  </div>
</div>

<!-- Sidebar Overlay -->
<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

<!-- Logout Modal Scripts -->
<link rel="stylesheet" href="/css/logout-modal.css">
<script src="/js/logout-modal.js"></script>
